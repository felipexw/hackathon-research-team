<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>Me Socorra</title>
  <meta http-equiv=X-UA-Compatible content="IE=edge">
  <meta name=description content="This a Demo Progressive Web Application which will work in offline, has a splash screen add to home screen etc,.">
  <meta name=viewport content="width=device-width, initial-scale=1, user-scalable=no">
  <meta name="theme-color" content="#0288d1">
  <meta name="msapplication-TileColor" content="#0288d1">
  <meta name="msapplication-TileImage" content="./images/icons/mstile-150x150.png">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="Progressive Web Application">
  <meta name="application-name" content="Progressive Web Application">
  <!-- Origin Trial Token, feature = Web Share, origin = https://demopwa.in, expires = 2017-04-17 -->
  <meta http-equiv="origin-trial" data-feature="Web Share" data-expires="2017-04-17" content="AqxDhXbIy0/QU7yDfw50G9cTlpGU9htcJzWxSgOyJgQfJJJZUBRWGXzNTiMWcW9bnuihdkrkcgahym5X8k/OzAsAAABfeyJvcmlnaW4iOiJodHRwczovL2RlbW9wd2EuaW46NDQzIiwiZmVhdHVyZSI6IldlYlNoYXJlIiwiZXhwaXJ5IjoxNDkyNDczNjAwLCJpc1N1YmRvbWFpbiI6dHJ1ZX0=">
  <!-- Origin Trial Token, feature = Service Worker Navigation Preload, origin = https://demopwa.in, expires = 2017-04-04 -->
  <meta http-equiv="origin-trial" data-feature="Service Worker Navigation Preload" data-expires="2017-04-04" content="AvSW/jxBbsmzTBOZnI+nSx+Nxqu4GxOuSxec7UfWnTri+qzfuFLolnnyitIvQIMOvrirRMYSLh1p3UhOg2tPygIAAABieyJvcmlnaW4iOiJodHRwczovL2RlbW9wd2EuaW46NDQzIiwiZmVhdHVyZSI6IlNlcnZpY2VXb3JrZXJOYXZpZ2F0aW9uUHJlbG9hZCIsImV4cGlyeSI6MTQ5MTMzNzAxMH0=">
  <link rel="apple-touch-icon" href="./images/icons/apple-touch-icon.png">
  <link rel="icon" type="image/png" href="./images/icons/favicon-32x32.png" sizes="32x32">
  <link rel="icon" type="image/png" href="./images/icons/favicon-16x16.png" sizes="16x16">
  <link rel="manifest" href="./manifest.json">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:200,300,400,500,700">
  <link rel="stylesheet" href="./css/styles.css">

  <style>
    .btn-default:hover,
    .btn-default:focus,
    .btn-default:active,
    .btn-default.active,
    .open>.dropdown-toggle.btn-default {
      color: #fff;
      background-color: red;
      border-color: red;
      /*set the color you want here*/
    }

    .btn-navbar {
      background-color: red;
      border-color: red;
      color: white;
      font-size: 25px;
    }

    @media (min-width: 768px) {
      .b-col {
        float: right;
      }
    }

    .thumb {
      width: 60px;
      height: 60px;
      -webkit-border-radius: 50%;
      -moz-border-radius: 50%;
      border-radius: 50%;
      overflow: hidden;
      display: inline-block;
      vertical-align: middle;
    }

    .margin-20 {
      margin: 20px;
    }

    .margin-top-20 {
      margin-top: 20px;
    }

    .pull-left {
      float: left !important;
    }

    .margin-20 {
      margin: 20px
    }
  </style>

</head>

<body ng-app="app-socorrista">
  <div class="app app__layout" ng-controller="AppCtrl as vm">
    <header>
      <span class="header__icon">
        <svg class="menu__icon no--select" width="24px" height="24px" viewBox="0 0 48 48" fill="#fff">
          <path d="M6 36h36v-4H6v4zm0-10h36v-4H6v4zm0-14v4h36v-4H6z"></path>
        </svg>
      </span>

      <span class="header__title no--select">Progressive Web Application {{ 1 + 1 }}</span>
    </header>

    <div class="menu">
      <div class="menu__header"></div>
      <ul class="menu__list">
        <li>
          <a target="_blank" rel="noopener" href="https://github.com/gokulkrishh">Author</a>
        </li>
        <li>
          <a target="_blank" rel="noopener" href="https://github.com/gokulkrishh/demo-progressive-web-app">Source</a>
        </li>
      </ul>
    </div>
    <div class="menu__overlay"></div>

    <div class="app__content">
      <div class="card">
        <div class="container">
          <div class="row">
            <div class="col-xs-12 col-sm-12 margin-20" ng-if="vm.alerts > 0">
              <div class="alert alert-danger">
                Alguém pediu ajuda
              </div>
              <div ng-include="'patientDetail2.html'"></div>
              <button class="margin-top-20 btn btn-danger btn-block" ng-click="vm.socorrer()">Socorrer</button>
            </div>
          </div>

          <!--PAINEL CENTRAL-->
          <div class="row">
            <div class="col-xs-12 col-sm-12 margin-20">
              <div class="alert alert-info" ng-if="vm.alerts === 0">
                <h1 style="text-align:center;">Nenhuma solicitação no momento.</h1>
              </div>
            </div>
          </div>
        </div>
      </div>


      <div class="fab fab__push">
        <div class="fab__ripple"></div>
        <img class="fab__image" src="./images/push-off.png" alt="Push Notification" />
      </div>

      <!-- Toast msg -->
      <div class="toast__msg"></div>
    </div>
  </div>

  <!-- JS Files  -->
  <script src="./js/toast.js"></script>
  <script src="./js/main.js"></script>
  <script src="./js/offline.js"></script>
  <script src="./js/app.js"></script>
  <script src="./js/push.js"></script>
  <script src="./js/sync.js"></script>
  <script src="./js/share.js"></script>
  <script src="./js/menu.js"></script>
  <script src="/vendor/angular/angular.js"></script>
  <script>
    const myApp = angular.module('app-socorrista', []);
    alert('load')
    myApp.controller('AppCtrl', ['$http', ($http) => {
      let vm = this;
      vm.showInfo = false;
      vm.alerts = 10;

      vm.test = 'TESTAND'

      vm.socorrer = function () {
        vm.alerts = 0;
      }


      function getAlerts() {
        return $http.get('http://localhost:8080/api/sos')
      }

      setTimeout(function () {
        setInterval(function () {
          getAlerts()
            .then(function (response) {
              vm.somebodyNeedHelp = response.data.hasAlert
              if (vm.somebodyNeedHelp) {
                vm.alerts += 1;
              }

            })
        }, 3000)
      }, 3000)


      return vm
    }])
  </script>



  <!-- My Google Analytics Report -->
  <script>
    (function (i, s, o, g, r, a, m) {
      i['GoogleAnalyticsObject'] = r;
      i[r] = i[r] || function () {
        (i[r].q = i[r].q || []).push(arguments)
      }, i[r].l = 1 * new Date();
      a = s.createElement(o),
        m = s.getElementsByTagName(o)[0];
      a.async = 1;
      a.src = g;
      m.parentNode.insertBefore(a, m)
    })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');

    ga('create', 'UA-92627241-1', 'auto');
    ga('send', 'pageview');
  </script>
</body>

</html>